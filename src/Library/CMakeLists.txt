project(SampleLibrary)

file(GLOB SOURCES
    src/*.cpp
)

add_library(${PROJECT_NAME} SHARED ${SOURCES})

target_include_directories(${PROJECT_NAME} PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include)

string(TOUPPER ${PROJECT_NAME} PROJECT_NAME_UPPER)
set(EXPORT_MACRO_NAME "${PROJECT_NAME_UPPER}_EXPORT_RAW")
set(CUSTOM_EXTERN_C_EXPORT "#define ${PROJECT_NAME_UPPER}_EXPORT extern \"C\" ${PROJECT_NAME_UPPER}_EXPORT_RAW")

generate_export_header(
    ${PROJECT_NAME}
    EXPORT_MACRO_NAME ${EXPORT_MACRO_NAME}
    EXPORT_FILE_NAME ${CMAKE_CURRENT_SOURCE_DIR}/include/${PROJECT_NAME}/Export.h
    CUSTOM_CONTENT_FROM_VARIABLE CUSTOM_EXTERN_C_EXPORT
)